var MOBILE_WIDTH=640,Helpers=function(){var e,t={settings:{},init:function(){e=this.settings},resizeVideoEle:function(e){var t=$(window).width(),i=.5625*t,n=0,o=$(window).height()/2-i/2;i<$(window).height()&&(i=$(window).height(),t=640/360*i,n=$(window).width()/2-t/2,o=0),e.css({width:t+"px",height:i+"px",left:n+"px",top:o+"px"}).addClass("is-initialized")},getPageTitle:function(){return $(document).find("title").text().split(" | ")[0]},shareOnFacebook:function(){var e={method:"feed",link:document.URL,name:t.getPageTitle()};e.picture=$('meta[property="og:image"]').attr("content"),FB.ui(e,function(e){})},shareOnTwitter:function(){var e="http://www.twitter.com/share?url="+document.URL+"&text="+t.getPageTitle();window.open(e,"twitterShare","width=550,height=300")},shareOnGoogle:function(){var e="https://plus.google.com/share?url="+document.URL;window.open(e,"googleShare","","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},shareOnMail:function(){window.location.href="mailto:?subject="+t.getPageTitle()+"&body="+document.URL},isInTheScreen:function(e,t,i){var n=e[0]===window,o=n?{top:0,left:0}:e.offset(),a=o.top+(n?e.scrollTop():0),r=o.left+(n?e.scrollLeft():0),s=r+e.width(),l=a+e.height(),d=t.offset(),c=t.width(),u=t.height();return a-i<=d.top+u&&l+i>=d.top&&r-i<=d.left+c&&s+i>=d.left}};return t}(),VideoFill=function(){var e,t={settings:{videoContainer:"",videoID:"",videoSrc:"",html5Videos:$(".video-element_html5"),vimeoVideos:$(".video-element_vimeo"),videoContainers:[]},init:function(i){e=this.settings;for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);this.bindUIActions(),this.initVariables(),setTimeout(function(){t.loadVimeoVideos(),t.handleHTML5Videos()},500)},initVariables:function(){e.html5Videos.each(function(){e.videoContainers.push($(this).parent().get(0))})},bindUIActions:function(){$(document).on("scroll",function(e){t.handleHTML5Videos()}),$(window).on("resize",function(e){t.handleHTML5Videos()})},handleHTML5Videos:function(){$.each(e.videoContainers,function(i){Helpers.isInTheScreen($(window),$(this),200)?Modernizr.video?t.loadHTML5Video($(this),$(e.html5Videos[i])):t.setFallbackImg($(this),$(e.html5Videos[i])):t.unloadHTML5Video($(this),$(e.html5Videos[i]))})},loadHTML5Video:function(e,t){if(e.hasClass("video-loaded"))e.find("video").get(0).paused&&"true"==e.find("video").attr("data-autoplay")&&e.find("video").get(0).play();else{var i="";Modernizr.video&&Modernizr.video.h264?i=t.attr("data-video")+".mp4":Modernizr.video&&Modernizr.video.webm?i=t.attr("data-video")+".webm":Modernizr.video&&Modernizr.video.ogg&&(i=t.attr("data-video")+".ogv");var n=t.attr("data-video")+".jpg";e.addClass("video-loaded").html("<div class='video-wrapper'><video data-autoplay='true' poster='"+n+"' loop='true' src='"+i+"' preload='auto' class='' /></div>"),("false"==t.attr("data-autoplay")||Modernizr.touch)&&e.find("video").attr("data-autoplay","false"),1!=Modernizr.touch&&"true"!=t.attr("data-controls")||e.find("video").attr("controls",!0),"true"==e.find("video").attr("data-autoplay")&&e.find("video").get(0).play()}},setFallbackImg:function(e,t){e.addClass("detail-img-fallback").html("<img src='"+t.attr("data-fallback-img")+"' alt='' />")},unloadHTML5Video:function(e,t){e.hasClass("video-loaded")&&!e.find("video").get(0).paused&&e.find("video").get(0).pause()},loadVimeoVideos:function(){e.vimeoVideos.each(function(){e.videoContainer=$(this).parent(),console.log(e.videoContainer.attr("class")),console.log($(this).attr("data-src")),$.getJSON("http://www.vimeo.com/api/oembed.json?url=http://vimeo.com/"+encodeURIComponent($(this).attr("data-video"))+"&api=1&callback=?",function(t){e.videoContainer.html(t.html)})})}};return t}(),PictureFill=function(){var e,t={settings:{matchedImageCounter:0,isImagesChanged:!1,breakpoints:[["medium","960px"],["small","640px"]],currentBreakpoint:"",detailImgContainer:$(".picturefill-img"),backgroundImages:[],matchedImageCounter:0,isImagesChanged:!1},init:function(t){e=this.settings;for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.detailImgContainer.each(function(){e.backgroundImages.push(JSON.parse($(this).attr("data-images")))}),this.bindUIActions(),this.getCurrentBreakPoint(),this.pictureFillAsImage()},getCurrentBreakPoint:function(){for(var i="large",n=0;n<e.breakpoints.length;n++)window.matchMedia&&window.matchMedia("(max-width: "+e.breakpoints[n][1]+")").matches&&(i=e.breakpoints[n][0]);i!==e.currentBreakpoint&&(e.currentBreakpoint=i,t.loadImage())},pictureFillAsImage:function(){var t=window.document.getElementsByTagName("span");e.isImagesChanged=!1;for(var i=0,n=t.length;i<n;i++)if(null!==t[i].getAttribute("data-picture")){for(var o=t[i].getElementsByTagName("span"),a=[],r=0,s=o.length;r<s;r++){var l=o[r].getAttribute("data-media");(!l||window.matchMedia&&window.matchMedia(l).matches)&&a.push(o[r])}var d=t[i].getElementsByTagName("img")[0];if(a.length){var c=a.pop();if(d&&"NOSCRIPT"!==d.parentNode.nodeName){if(c===d.parentNode)continue}else d=window.document.createElement("img"),d.alt=t[i].getAttribute("data-alt");e.isImagesChanged=!0,d.src=c.getAttribute("data-src"),d.id="picturefill-img-"+e.matchedImageCounter,c.appendChild(d),d.removeAttribute("width"),d.removeAttribute("height")}else d&&d.parentNode.removeChild(d);e.matchedImageCounter++}},loadImage:function(){console.log("background image is "+e.backgroundImages[e.currentBreakpoint]),e.detailImgContainer.each(function(t){var i=$(this);i.get(0).style.backgroundImage="url("+e.backgroundImages[t][e.currentBreakpoint]+")",setTimeout(function(){i.addClass("is-image-loaded")},0)})},bindUIActions:function(){$(window).on("resize",function(e){t.getCurrentBreakPoint(),t.pictureFillAsImage()})}};return t}(),Nav=function(){var e,t={settings:{htmlTag:$("html"),header:$(".header"),headerStickyClass:"header--sticky",menuLink:$(".menu-link"),selectedMenuItem:$(".selected-menu-item"),activeClass:"header--active",mainNav:$(".main-nav-container"),closeBtnClass:"ml-icon-nav-close",navMenuClass:"ml-icon-nav-menu",mainNavAnimateClass:"main-nav-container--animate",navWrapper:$(".main-nav-container .nav-wrapper"),ns:".nav"},init:function(){e=this.settings,this.bindUIActions(),this.scrollHandler(),e.header.addClass("header--visible")},bindUIActions:function(){e.menuLink.click(function(e){t.menuClickHandler(e)}),e.selectedMenuItem.click(function(e){t.menuClickHandler(e)}),$(document).on("scroll",function(e){t.scrollHandler()}),$(document).on("touchmove",function(e){t.scrollHandler()}),$(window).on("resize",function(e){t.resizeHandler()})},menuClickHandler:function(i){e.htmlTag.hasClass(e.activeClass)?t.close():t.open(),i.preventDefault()},scrollHandler:function(t){$(window).scrollTop()<=10?e.header.removeClass(e.headerStickyClass):e.header.addClass(e.headerStickyClass)},clickHandler:function(i){var n=!1;($.contains(e.navWrapper[0],i.target)||e.navWrapper[0]==i.target||$.contains(e.header[0],i.target)||e.header[0]==i.target)&&(n=!0),n||t.close()},open:function(){e.htmlTag.addClass(e.activeClass),e.menuLink.removeClass(e.navMenuClass).addClass(e.closeBtnClass),setTimeout(function(){e.mainNav.addClass(e.mainNavAnimateClass),$(document).on("click"+e.ns,t.clickHandler)},10)},close:function(){e.menuLink.addClass(e.navMenuClass).removeClass(e.closeBtnClass),e.mainNav.removeClass(e.mainNavAnimateClass),e.htmlTag.removeClass(e.activeClass),$(document).off("click"+e.ns)},resizeHandler:function(){}};return t}(),Home=function(){var e,t={settings:{homeSlider:$("#home-slider")},init:function(){e=this.settings,PictureFill.init();var t=[],i=null;$(".homeslide").each(function(){t.push($(this).data("tooltip-title"))}),$("#home-slider").fullpage({verticalCentered:!0,navigation:!0,navigationTooltips:t,continuousVertical:!0,autoScrolling:!0,css3:!0,scrollingSpeed:800,sectionSelector:".homeslide",afterRender:function(e){$("#home-slider").addClass("is-ready"),$(".homeslide").removeClass("is-ready");var t=$(".homeslide").first();setTimeout(function(){t.addClass("is-ready")},900)},afterLoad:function(e){$(".homeslide").removeClass("is-ready"),$(this).addClass("is-ready")},onLeave:function(e,t,i){$(".homeslide").eq(t-1).hasClass("homeslide--video")&&$(".homeslide").eq(t-1).find(".homeslide__video").get(0).play()}}),$(window).bind("mousewheel",function(e){clearInterval(i)})}};return t}(),Detail=function(){var e,t={settings:{centeredContent:$(".detail-content__body__section--centered"),workContainer:$(".detail-content--work"),headerContainer:$(".detail-header--work"),projectYear:$(".detail-content__header__year"),centeredContentProportion:.5,backgroundProportion:2.7,breakPoint:960,backgroundTopPos:0,newHeight:0,workContainerMarginTop:0,hasVideo:!0,videoEle:$(".video-container #vid"),headerArrow:$(".detail-header__arrow"),facebookLink:$(".share-menu__list-item__link.ml-icon-social-facebook"),twitterLink:$(".share-menu__list-item__link.ml-icon-social-twitter"),googleLink:$(".share-menu__list-item__link.ml-icon-social-google"),mailLink:$(".share-menu__list-item__link.ml-otherml-icon-mail")},init:function(){e=this.settings,this.bindUIActions(),e.headerContainer.length>0&&this.resizeHandler(),(!Modernizr.video||Modernizr.touch||$(".picturefill").length>0||0===e.videoEle.length)&&(e.hasVideo=!1,PictureFill.init()),e.hasVideo&&t.resizeHandler(),$(".js-lazy").jail({offset:"200"})},bindUIActions:function(){$(window).on("resize",function(e){t.resizeHandler()}),e.headerArrow.on("click",function(e){e.preventDefault(),t.scrollToContent()}),e.facebookLink.on("click",function(e){e.preventDefault(),Helpers.shareOnFacebook()}),e.twitterLink.on("click",function(e){e.preventDefault(),Helpers.shareOnTwitter()}),e.googleLink.on("click",function(e){e.preventDefault(),Helpers.shareOnGoogle()}),e.mailLink.on("click",function(e){e.preventDefault(),Helpers.shareOnMail()})},scrollToContent:function(){$("html,body").animate({scrollTop:window.innerHeight},250,"swing")},resizeHandler:function(){e.hasVideo&&Helpers.resizeVideoEle(e.videoEle)}};return t}(),ScrollReveal=function(){var e,t={settings:{},init:function(){e=this.settings;for(var t={rootMargin:"0px",threshold:.2},i=function(e,t){for(var i=0;i<e.length;i++)!function(){var t=e[i];setTimeout(function(){t.target.classList.add("is-visible")},100*i)}()},n=new IntersectionObserver(i,t),o=$(".js-scroll_reveal"),a=0,r=o.length;a<r;a++)n.observe(o[a])}};return t}();$(window).load(function(){Helpers.init(),FastClick.attach(document.body),Nav.init(),ScrollReveal.init(),$(".home").length>0&&Home.init(),$(".video-element").length>0&&VideoFill.init(),0==$(".home").length&&Detail.init(),$("body").addClass("is-loaded")});